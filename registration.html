<!DOCTYPE html>
<html>
<head>
  <title>Parent Registration</title>
  <link rel="stylesheet" href="registration.css">
</head>
<body>
  <div class="container">
    <h1>Digital Safety Monitor</h1>
    <h2>Parent Registration</h2>

    <p>This page allows you to set up parental controls for the current Chrome profile.</p>

    <button id="signInButton">Sign in with Google</button>

    <div id="pinSetup" style="display:none;">
      <h2>Set a PIN</h2>
      <label for="newPin">New PIN (4-digit):</label>
      <input type="password" id="newPin" maxlength="4" pattern="[0-9]{4}" placeholder="e.g., 1234">
      <label for="confirmPin">Confirm PIN:</label>
      <input type="password" id="confirmPin" maxlength="4" pattern="[0-9]{4}" placeholder="e.g., 1234">
      <button id="setPinButton">Set PIN</button>
      <p id="pinStatusMessage" style="color: red;"></p>
    </div>

    <div id="pinVerification" style="display:none;">
      <h2>Enter PIN</h2>
      <label for="verifyPin">PIN:</label>
      <input type="password" id="verifyPin" maxlength="4" pattern="[0-9]{4}" placeholder="e.g., 1234">
      <button id="verifyPinButton">Verify PIN</button>
      <p id="verifyPinStatusMessage" style="color: red;"></p>
    </div>

    <div id="registrationForm" style="display:none;">
      <h2>Welcome, <span id="parentEmail"></span>!</h2>
      <p>Configuring settings for Child: <span id="currentUserEmailDisplay" style="font-weight: bold; color: #007bff;"></span></p>

      <label for="restrictedUrl">Restricted URL:</label>
      <input type="text" id="restrictedUrl" placeholder="e.g., youtube.com">
      <button id="addUrlButton">Add URL</button>
      <div id="urlListContainer" style="max-height: 200px; overflow-y: auto; border: 1px solid #c9d6de; border-radius: 6px; padding: 10px; margin-bottom: 20px;">
        <ul id="urlList"></ul>
      </div>

      <div class="url-file-actions">
        <button id="exportUrlsButton">Export URLs</button>
        <input type="file" id="importUrlsFile" accept=".txt,.csv" style="display: none;" />
        <button id="importUrlsButton">Import URLs</button>
      </div>

      <label for="blockedMessage">Message to Child (when blocked):</label>
      <textarea id="blockedMessage" rows="4" placeholder="This site is blocked by your parent."></textarea>

      <button id="saveSettingsButton">Save Settings</button>
      <p id="statusMessage"></p>
    </div>
  </div>
  <script src="registration.js"></script>
</body>
</html>
